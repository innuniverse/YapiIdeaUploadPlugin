plugins {
    id("java")
    id("org.jetbrains.intellij") version "1.9.0"
    id("org.jetbrains.changelog") version '1.3.1'
}

group = "com.bizerone"
version = "1.8.2.4"

compileJava.options.encoding = "UTF-8"
compileTestJava.options.encoding = "UTF-8"
apply plugin: 'org.jetbrains.changelog'

repositories {
    mavenLocal()
    maven { url "https://maven.aliyun.com/repository/public" }
    maven { url "https://repo.huaweicloud.com/repository/maven" }
    mavenCentral()
}

dependencies {
    testImplementation 'org.junit.jupiter:junit-jupiter-api:5.7.0'
    testRuntimeOnly 'org.junit.jupiter:junit-jupiter-engine:5.7.0'
}

intellij {
    pluginName = "YapiIdeaUploadPlugin"
    version = "2022.2.2"
    plugins = ['java', 'properties']
}

patchPluginXml {
    sinceBuild = "1"
    untilBuild = "999.*"

//    changeNotes = provider { changelog.getUnreleased().toHTML()}
}

test {
    useJUnitPlatform()
}

runIde {
    jvmArgs("-Xmx2048m","-XX:ReservedCodeCacheSize=512m","-Xms128m")
}
